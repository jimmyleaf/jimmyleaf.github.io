<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title><![CDATA[JimmyLeaf的个人小站]]></title>
  
  <link href="/atom.xml" rel="self"/>
  <link href="http://yoursite.com/"/>
  <updated>2015-08-24T07:31:07.000Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name><![CDATA[JimmyLeaf]]></name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title><![CDATA[PHP CURL单独获取http状态码]]></title>
    <link href="http://yoursite.com/2015/08/24/PHP-CURL%E5%8D%95%E7%8B%AC%E8%8E%B7%E5%8F%96http%E7%8A%B6%E6%80%81%E7%A0%81/"/>
    <id>http://yoursite.com/2015/08/24/PHP-CURL单独获取http状态码/</id>
    <published>2015-08-24T07:18:00.000Z</published>
    <updated>2015-08-24T07:31:07.000Z</updated>
    <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>PHP使用CURL能获取访问某URL返回的html的头信息，body信息等，下面讲述的是从返回的头信息单独获取状态码的方法</p>
<h2 id="实例">实例</h2><p>直接贴核心代码<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*模拟浏览器*/</span></span><br><span class="line"><span class="variable">$user_agent</span> = <span class="string">"Mozilla/5.0 (iPhone; CPU iPhone OS 8_0 like Mac OS X) AppleWebKit/600.1.3 (KHTML, like Gecko) Version/8.0 Mobile/12A4345d Safari/600.1.4"</span>;</span><br><span class="line"><span class="comment">//初始化</span></span><br><span class="line"><span class="variable">$ch</span> = curl_init();</span><br><span class="line">curl_setopt(<span class="variable">$ch</span>,CURLOPT_HEADER,<span class="number">1</span>);<span class="comment">//获取http头信息</span></span><br><span class="line">curl_setopt(<span class="variable">$ch</span>,CURLOPT_NOBODY,<span class="number">1</span>);<span class="comment">//不返回html的body信息</span></span><br><span class="line">curl_setopt(<span class="variable">$ch</span>,CURLOPT_TIMEOUT,<span class="number">30</span>); <span class="comment">//超时时长，单位秒</span></span><br><span class="line">curl_setopt (<span class="variable">$ch</span>, CURLOPT_USERAGENT, <span class="variable">$user_agent</span> ); <span class="comment">// 模拟用户使用的浏览器</span></span><br><span class="line">curl_setopt(<span class="variable">$ch</span>, CURLOPT_REFERER, <span class="string">"http://www.baidu.com/search/spider.html"</span>);<span class="comment">//模拟百度爬虫获取，防止被禁</span></span><br><span class="line">curl_setopt(<span class="variable">$ch</span>, CURLOPT_URL, <span class="variable">$url</span>);<span class="comment">//$url代表你要请求的链接</span></span><br><span class="line">curl_setopt(<span class="variable">$ch</span>, CURLOPT_RETURNTRANSFER, <span class="number">1</span>);<span class="comment">//返回值，而不是直接输出</span></span><br><span class="line">curl_setopt(<span class="variable">$ch</span>, CURLOPT_CUSTOMREQUEST, <span class="string">'GET'</span>);<span class="comment">//设置请求方式GET</span></span><br><span class="line"><span class="comment">//执行并获取HTML文档内容</span></span><br><span class="line">curl_exec(<span class="variable">$ch</span>);</span><br><span class="line"><span class="variable">$http_code</span> = strval(curl_getinfo(<span class="variable">$ch</span>,CURLINFO_HTTP_CODE));<span class="comment">//单独获取http状态码;</span></span><br><span class="line">var_dump(<span class="variable">$http_code</span>);<span class="comment">//输出http状态码</span></span><br><span class="line"><span class="comment">//释放curl句柄</span></span><br><span class="line">curl_close(<span class="variable">$ch</span>);</span><br></pre></td></tr></table></figure></p>
<h2 id="后记">后记</h2><p>PHP结合CURL还能做到很多事，待研究，在此记录</p>
]]></content>
    <summary type="html">
    <![CDATA[<h2 id="前言">前言</h2><p>PHP使用CURL能获取访问某URL返回的html的头信息，body信息等，下面讲述的是从返回的头信息单独获取状态码的方法</p>
<h2 id="实例">实例</h2><p>直接贴核心代码<br><figure class="high]]>
    </summary>
    
      <category term="CURL" scheme="http://yoursite.com/tags/CURL/"/>
    
      <category term="PHP" scheme="http://yoursite.com/tags/PHP/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[七夕节随笔]]></title>
    <link href="http://yoursite.com/2015/08/21/%E4%B8%83%E5%A4%95%E8%8A%82%E9%9A%8F%E7%AC%94/"/>
    <id>http://yoursite.com/2015/08/21/七夕节随笔/</id>
    <published>2015-08-20T16:23:17.000Z</published>
    <updated>2015-08-20T16:36:31.000Z</updated>
    <content type="html"><![CDATA[<p>哪里有人会喜欢寂寞，只不过是不想失望罢了<br>不知道自己一个人过了多少个光棍节，情人节，七夕。。。<br>自从毕业以来，好像就把自己的交友圈封闭了，除了职场圈和之前的朋友，就没有兴趣，也没有精力去发展新的朋友了<br>所以才会一直单身到现在吧（不过是自己给自己找个理由罢了）</p>
<p>也是，何必去羡慕他人晒出来的幸福，只要心里装着一个喜欢的人就够了<br>而刚好，我心里装着一个<br>好像喜欢很多年了，一直不敢表白，怕失去，怕被拒绝，什么都怕，胆小如鼠<br>是时候勇敢往前踏一步了，就算前方是悬崖又如何<br>加油！少年<br>晚安~</p>
]]></content>
    <summary type="html">
    <![CDATA[<p>哪里有人会喜欢寂寞，只不过是不想失望罢了<br>不知道自己一个人过了多少个光棍节，情人节，七夕。。。<br>自从毕业以来，好像就把自己的交友圈封闭了，除了职场圈和之前的朋友，就没有兴趣，也没有精力去发展新的朋友了<br>所以才会一直单身到现在吧（不过是自己给自己找个理由罢了]]>
    </summary>
    
      <category term="心情记录" scheme="http://yoursite.com/tags/%E5%BF%83%E6%83%85%E8%AE%B0%E5%BD%95/"/>
    
      <category term="随笔" scheme="http://yoursite.com/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Hello World]]></title>
    <link href="http://yoursite.com/2015/08/19/hello-world/"/>
    <id>http://yoursite.com/2015/08/19/hello-world/</id>
    <published>2015-08-19T02:09:06.000Z</published>
    <updated>2015-08-19T02:09:06.000Z</updated>
    <content type="html"><![CDATA[<p>Welcome to <a href="http://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="http://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="http://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick_Start">Quick Start</h2><h3 id="Create_a_new_post">Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run_server">Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate_static_files">Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy_to_remote_sites">Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>
]]></content>
    <summary type="html">
    <![CDATA[<p>Welcome to <a href="http://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="http://hexo.io]]>
    </summary>
    
  </entry>
  
</feed>
