<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title><![CDATA[JimmyLeaf的个人小站]]></title>
  
  <link href="/atom.xml" rel="self"/>
  <link href="http://yoursite.com/"/>
  <updated>2015-08-28T10:18:23.000Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name><![CDATA[JimmyLeaf]]></name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title><![CDATA[IOS 测试自动化框架——smallapple]]></title>
    <link href="http://yoursite.com/2015/08/28/IOS-%E6%B5%8B%E8%AF%95%E8%87%AA%E5%8A%A8%E5%8C%96%E6%A1%86%E6%9E%B6%E2%80%94%E2%80%94smallapple/"/>
    <id>http://yoursite.com/2015/08/28/IOS-测试自动化框架——smallapple/</id>
    <published>2015-08-28T09:42:04.000Z</published>
    <updated>2015-08-28T10:18:23.000Z</updated>
    <content type="html"><![CDATA[<h1 id="smallapple简介">smallapple简介</h1><h2 id="下载地址">下载地址</h2><p><a href="https://github.com/jimmyleaf/smallapple" target="_blank" rel="external">github</a></p>
<h2 id="介绍">介绍</h2><p>Smallapple是一个开源的IOS自动化测试工具，旨在提供一套完整的IOS自动化测试解决方案，提供针对IOS App的功能和性能测试，同时提供类似Android adb、重签名、instruments结果解析、录制回放等工具集。</p>
<p>Smallapple通过一键式的执行方式，自动完成App重签名、安装、测试、性能采集（包括CPU、内存、流量等）、Crash检测和结果报告等工作。</p>
<h2 id="特性">特性</h2><p>Smallapple致力于以最简单的方式，最小的代价提供给用户使用。<br><em>支持非越狱设备
</em>不需要依赖源码<br><em>支持Appstore或者第三方下载的App安装测试
</em>完全的命令行模式</p>
<p>Smallapple是基于苹果官方的instruments工具来开发，测试脚本支持原生的UI Automation，同时扩展了很多功能使得自动化测试更加便捷、易用。<br><a id="more"></a></p>
<h1 id="如何部署">如何部署</h1><h2 id="前置条件">前置条件</h2><p><em>一台 MAC（ macbook pro、air、iMac均可）
</em>要求OSX 10.9+<br><em>安装 XCode 5.1+
</em>确保已安装Apple Developer Tools (command line tools)<br>*申请开发者证书，打发者证书的Debug包</p>
<h1 id="快速开始">快速开始</h1><p>先查看smallapple.sh 的使用说明:<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">smallapple version 0.9.5&#10;&#10;       install        : install app&#10;       appinfo        : get app infomation&#10;       resign         : resign app&#10;&#10;       record         : record &#38; playback tool&#10;&#10;       automation     : automation testing&#10;       vcheck         : version compatibility testing</span><br></pre></td></tr></table></figure></p>
<p>如上图所示</p>
<ol>
<li>install app 安装对应的app，需要ipa包(开发者证书,机器加入provision)<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh smallapple.sh install xxx.ipa&#10;&#10;&#22914;&#26524;&#19981;&#36755;&#20837;ipa&#21253;&#36335;&#24452;&#65292;&#20250;&#25552;&#31034;&#10;usage: smallapple install &#60;.ipa/.app path&#62;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>2.appinfo  查找对应app包得一些信息<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh smallapple.sh appinfo xxx.ipa</span><br></pre></td></tr></table></figure></p>
<p>3.resign app 重签名app<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh smallapple.sh  resign&#10;resign [options] &#60;.ipa/.app path&#62; &#60;output path&#62;&#10;options:&#10;    -p &#60;.mobileprovision path&#62;&#10;      or -e &#60;entitlement path&#62;&#10;    -i &#60;developer identity&#62;</span><br></pre></td></tr></table></figure></p>
<p>看出来参数需要签名id和provision的path<br>使用-p指定描述文件(Provisoning Profiles)，-i指定开发者证书(Certificates)</p>
<p>4.automation testing <strong>最重要的命令,进行自动化测试</strong><br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh smallapple.sh automation&#10;usage: smallapple automation [options] &#60;.ipa/.app path | bundle id&#62;&#10;options:&#10;    -s &#60;device id&#62;                 : specify device id. default the first found device&#10;    -b                             : use bundle id instead of app path&#10;    -o &#60;result dir&#62;                : result direcotry. default $PWD/result&#10;&#10;script options:&#10;    -t &#60;template&#62;                  : instruments template. default SMALLAPPLE/templates/Automation_Monitor_CoreAnimation_Energy_Network.tracetemplate&#10;    -c &#60;script&#62;                    : instruments automation js. default SMALLAPPLE/scripts/UIAutoMonkey.js&#10;&#10;resign options:&#10;    -p &#60;.mobileprovision path&#62;     : .mobileprovision path&#10;      or  -e &#60;entitlement path&#62;    : entitlement path&#10;    -i &#60;developer identity&#62;        : ios developer identity&#10;&#10;crash options:&#10;    -d &#60;dsym path&#62;                 : dSYM path for crash analyze&#10;&#10;example:&#10;    smallapple automation test.ipa&#10;    smallapple automation -b com.baidu.BaiduMobile&#10;    smallapple automation -c &#60;testcase&#62; -b com.baidu.BaiduMobile&#10;    smallapple automation -s &#60;device&#62; -p &#60;provision&#62; -i &#60;identity&#62; -c &#60;testcase&#62; test.ipa</span><br></pre></td></tr></table></figure></p>
<p>具体命令使用方式看上面的提示就行了,-c 执行指定js脚本，如果没有这选项，默认执行monkey脚本</p>
<h1 id="扩展">扩展</h1><p>运行完之后，如果没啥报错，在根目录下会生成一个 result文件夹，打开该文件夹下的 result.html可查看测试报告<br>大多数情况下，只需要提供一个编译好的App(.ipa or .app)即可进行自动化的测试。<br>建议每次新跑测试时将原来的result目录删除或者-o指定其它目录。</p>
<p><img src="http://img.blog.csdn.net/20150512222338484" alt="运行效果"></p>
<h3 id="通过iosutil查看已安装App，找到对应的Bundle_Id">通过iosutil查看已安装App，找到对应的Bundle Id</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/iosutil listapp</span><br></pre></td></tr></table></figure>
<h3 id="可视化脚本录制回放">可视化脚本录制回放</h3><p>mallapple record或者直接open bin/iOSRecorder.app即可打开录制回放工具<br><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">sh</span> smallapple.<span class="keyword">sh</span> record</span><br></pre></td></tr></table></figure></p>
<h3 id="覆盖安装测试">覆盖安装测试</h3><p>bin/iosutil可以查看指定App的数据文件，并且可以将App的Documents和Library目录下文件拷贝到Mac机进行旧版本数据的备份，或者将Mac机文件还原上传到这2个目录下。</p>
<p>查看com.baidu.BaiduMobile的Documents目录<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/iosutil ls -<span class="tag">b</span> com<span class="class">.baidu</span><span class="class">.BaiduMobile</span> /Documents</span><br></pre></td></tr></table></figure></p>
<p>备份com.baidu.BaiduMobile的Documents目录下data文件<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ bin/iosutil pull -<span class="tag">b</span> com<span class="class">.baidu</span><span class="class">.BaiduMobile</span> /Documents/data ./backup</span><br></pre></td></tr></table></figure></p>
<p>完成新版本安装后，还原com.baidu.BaiduMobile的Documents目录下data文件<br><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="keyword">bin/iosutil </span><span class="keyword">push </span>-<span class="keyword">b </span>com.<span class="keyword">baidu.BaiduMobile </span>./<span class="keyword">backup/data </span>/Documents</span><br></pre></td></tr></table></figure></p>
<p>—-THE END—</p>
]]></content>
    <summary type="html">
    <![CDATA[<h1 id="smallapple简介">smallapple简介</h1><h2 id="下载地址">下载地址</h2><p><a href="https://github.com/jimmyleaf/smallapple">github</a></p>
<h2 id="介绍">介绍</h2><p>Smallapple是一个开源的IOS自动化测试工具，旨在提供一套完整的IOS自动化测试解决方案，提供针对IOS App的功能和性能测试，同时提供类似Android adb、重签名、instruments结果解析、录制回放等工具集。</p>
<p>Smallapple通过一键式的执行方式，自动完成App重签名、安装、测试、性能采集（包括CPU、内存、流量等）、Crash检测和结果报告等工作。</p>
<h2 id="特性">特性</h2><p>Smallapple致力于以最简单的方式，最小的代价提供给用户使用。<br><em>支持非越狱设备
</em>不需要依赖源码<br><em>支持Appstore或者第三方下载的App安装测试
</em>完全的命令行模式</p>
<p>Smallapple是基于苹果官方的instruments工具来开发，测试脚本支持原生的UI Automation，同时扩展了很多功能使得自动化测试更加便捷、易用。<br>]]>
    
    </summary>
    
      <category term="ios" scheme="http://yoursite.com/tags/ios/"/>
    
      <category term="测试" scheme="http://yoursite.com/tags/%E6%B5%8B%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[如何进行ios稳定性测试]]></title>
    <link href="http://yoursite.com/2015/08/28/%E5%A6%82%E4%BD%95%E8%BF%9B%E8%A1%8Cios%E7%A8%B3%E5%AE%9A%E6%80%A7%E6%B5%8B%E8%AF%95/"/>
    <id>http://yoursite.com/2015/08/28/如何进行ios稳定性测试/</id>
    <published>2015-08-28T03:09:57.000Z</published>
    <updated>2015-08-28T03:30:29.000Z</updated>
    <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>稳定性测试一直是app测试的重点,保证app较低的crash率即能提高用户的使用体验,也是大部人kpi得一部分<br>下面的monkey测试脚本，转自之前的一个同事，也是我一直在用来跑monkey得<br>可以直接运行再instrument工具中，也可以使用命令instruments来启动<br><a id="more"></a><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">iOSMonkey2</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.elementArray = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>._addToArray = <span class="function"><span class="keyword">function</span>(<span class="params">root,len</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> rootname = root.name()+<span class="string">""</span></span><br><span class="line">        rootname = rootname.toLowerCase();</span><br><span class="line">        <span class="keyword">if</span>( !<span class="keyword">this</span>._isIndicator(root) &amp;&amp; root.toString() != <span class="string">"[object UIAKey]"</span> &amp;&amp; rootname.match(<span class="string">"notap"</span>+<span class="string">"$"</span>) !=<span class="string">"notap"</span> )&#123;</span><br><span class="line">            <span class="keyword">if</span>(root.isEnabled() &amp;&amp; root.isVisible())&#123;</span><br><span class="line">                <span class="keyword">if</span>(len==<span class="number">0</span>)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(root.hitpoint() != <span class="literal">null</span>)&#123;</span><br><span class="line">                        <span class="keyword">var</span> rect = root.hitpoint();</span><br><span class="line">                        <span class="keyword">if</span>(rect.y&gt;<span class="number">20</span>)&#123;</span><br><span class="line">                            <span class="keyword">this</span>.elementArray.push(root);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(<span class="keyword">this</span>._toFlick(root) || <span class="keyword">this</span>._toType(root))&#123;</span><br><span class="line">                    <span class="keyword">this</span>.elementArray.push(root);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>._iterator = <span class="function"><span class="keyword">function</span>(<span class="params">root</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> eleArray = <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">if</span>(root.toString() !=<span class="string">"[object UIAWebView]"</span> &amp;&amp; root.toString() != <span class="string">"[object UIAKeyboard]"</span>)&#123;</span><br><span class="line">            eleArray = root.elements();</span><br><span class="line">            <span class="keyword">this</span>._addToArray(root,eleArray.length);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(eleArray.length != <span class="number">0</span> &amp;&amp; eleArray != <span class="literal">null</span>)&#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i&lt; eleArray.length; i++)&#123;</span><br><span class="line">                    <span class="keyword">this</span>._iterator(eleArray[i]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>._isIndicator = <span class="function"><span class="keyword">function</span>(<span class="params">element</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> element.toString().match(<span class="string">"Indicator"</span>+<span class="string">"$"</span>)==<span class="string">"Indicator"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>._findIndicator = <span class="function"><span class="keyword">function</span>(<span class="params">root</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> elements = root.elements();</span><br><span class="line">        <span class="keyword">if</span>(elements.length !=<span class="number">0</span> &amp;&amp; elements != <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">var</span> i =<span class="number">0</span>; i&lt;elements.length;i++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(<span class="keyword">this</span>._isIndicator(elements[i]))&#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">this</span>._findIndicator(elements[i]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>._getAllElements = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> app = UIATarget.localTarget().frontMostApp();</span><br><span class="line">        <span class="keyword">this</span>.elementArray = <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">this</span>.elementArray = <span class="keyword">new</span> <span class="built_in">Array</span>();</span><br><span class="line">        <span class="keyword">this</span>._iterator(app);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>._getElementAncestry = <span class="function"><span class="keyword">function</span>(<span class="params">element</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> arr = element.ancestry();</span><br><span class="line">        <span class="keyword">var</span> tmp = <span class="string">""</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i&lt; arr.length; i++)&#123;</span><br><span class="line">                tmp += arr[i].toString()+<span class="string">"-&gt;"</span></span><br><span class="line">            &#125;</span><br><span class="line">        <span class="keyword">return</span> tmp;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>._selector = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">this</span>._getAllElements();</span><br><span class="line">        <span class="keyword">var</span> len = <span class="keyword">this</span>.elementArray.length;</span><br><span class="line">        <span class="comment">//UIALogger.logMessage(len+"");</span></span><br><span class="line">        <span class="keyword">var</span> random = <span class="built_in">Math</span>.round(<span class="built_in">Math</span>.random() * len);</span><br><span class="line">        <span class="keyword">if</span> (random == len)&#123;</span><br><span class="line">            random = random-<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.elementArray[random];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>._toFlick = <span class="function"><span class="keyword">function</span>(<span class="params">element</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(element.toString()==<span class="string">"[object UIATableView]"</span> || element.toString()==<span class="string">"[object UIAScrollView]"</span> || element.toString()==<span class="string">"[object UIATableCell]"</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>._toType = <span class="function"><span class="keyword">function</span>(<span class="params">element</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(element.toString()==<span class="string">"[object UIATextField]"</span> || element.toString()==<span class="string">"[object UIASecureTextField]"</span> || element.toString()==<span class="string">"[object UIATextView]"</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>._tap = <span class="function"><span class="keyword">function</span>(<span class="params">element</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(element.toString()==<span class="string">"[object UIASwitch]"</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(element.value() != <span class="string">""</span> &amp;&amp; element.value() != <span class="literal">null</span>)&#123;</span><br><span class="line">                element.setValue(<span class="keyword">this</span>._falseString(element.value()));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">var</span> x = <span class="built_in">Math</span>.random().toFixed(<span class="number">2</span>);</span><br><span class="line">            <span class="keyword">var</span> y = <span class="built_in">Math</span>.random().toFixed(<span class="number">2</span>);</span><br><span class="line">            element.tapWithOptions(&#123;tapOffset:&#123;x:x,y:y&#125;&#125;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>._flick = <span class="function"><span class="keyword">function</span>(<span class="params">element</span>)</span>&#123;</span><br><span class="line">        <span class="comment">//element.scrollToVisible();</span></span><br><span class="line">        <span class="keyword">var</span> x = <span class="built_in">Math</span>.random().toFixed(<span class="number">2</span>);</span><br><span class="line">        <span class="keyword">var</span> y = <span class="built_in">Math</span>.random().toFixed(<span class="number">2</span>);</span><br><span class="line">        element.flickInsideWithOptions(&#123;startOffset:&#123;x:<span class="number">0.5</span>, y:<span class="number">0.5</span>&#125;, endOffset:&#123;x:x,y:y&#125;&#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>._getAppSize = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> rect = UIATarget.localTarget().frontMostApp().rect();</span><br><span class="line">        <span class="keyword">return</span> rect;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>._type = <span class="function"><span class="keyword">function</span>(<span class="params">element</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> len = <span class="built_in">Math</span>.round(<span class="built_in">Math</span>.random()*<span class="number">100</span>);</span><br><span class="line">        <span class="keyword">var</span> value = <span class="keyword">this</span>._randomChar(len);</span><br><span class="line">        element.setValue(value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>._falseString = <span class="function"><span class="keyword">function</span>(<span class="params">value</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(value==<span class="string">"0"</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"1"</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"0"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>._randomChar = <span class="function"><span class="keyword">function</span>(<span class="params">len</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span>  x=<span class="string">"0123456789qwertyuioplkjhgfdsazxcvbnm"</span>;</span><br><span class="line">        <span class="keyword">var</span>  tmp=<span class="string">""</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>;i &lt; len;i++)&#123;</span><br><span class="line">            tmp += x.charAt(<span class="built_in">Math</span>.ceil(<span class="built_in">Math</span>.random()*<span class="number">100000000</span>)%x.length);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span>  tmp;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.operator = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> element = <span class="keyword">this</span>._selector();</span><br><span class="line">        UIALogger.logMessage(<span class="string">"本次操作的对象的类型是："</span>+element.toString());</span><br><span class="line">        <span class="keyword">var</span> ancestry = <span class="keyword">this</span>. _getElementAncestry(element);</span><br><span class="line">        UIALogger.logMessage(ancestry+element.toString()+<span class="string">"-&gt;name:"</span>+element.name());</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>._toFlick(element))&#123;</span><br><span class="line">            <span class="keyword">this</span>._flick(element);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="keyword">this</span>._toType(element))&#123;</span><br><span class="line">            <span class="keyword">this</span>._type(element);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(element.hitpoint() != <span class="literal">null</span>)&#123;</span><br><span class="line">                <span class="keyword">this</span>._tap(element);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.screenShoot = <span class="function"><span class="keyword">function</span>(<span class="params">imageName</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> target = UIATarget.localTarget();</span><br><span class="line">        <span class="keyword">var</span> app = target.frontMostApp();</span><br><span class="line">        target.captureRectWithName(target.frontMostApp().rect(),imageName);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.waitForLoad = <span class="function"><span class="keyword">function</span>(<span class="params">preDelay</span>) </span>&#123;        </span><br><span class="line">        <span class="keyword">var</span> target = UIATarget.localTarget();</span><br><span class="line">        <span class="keyword">if</span> (!preDelay) &#123;</span><br><span class="line">            target.delay(<span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            target.delay(preDelay);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> done = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">var</span> counter = <span class="number">0</span>;      </span><br><span class="line">        <span class="keyword">while</span> ((!done) &amp;&amp; (counter &lt; <span class="number">60</span>)) &#123;</span><br><span class="line">            <span class="keyword">var</span> progressIndicator = UIATarget.localTarget().frontMostApp().windows()[<span class="number">0</span>].activityIndicators()[<span class="number">0</span>];</span><br><span class="line">            <span class="keyword">var</span> indicator = <span class="keyword">this</span>._findIndicator(UIATarget.localTarget().frontMostApp());</span><br><span class="line">            <span class="keyword">if</span> (indicator == <span class="number">1</span>) &#123;</span><br><span class="line">                UIALogger.logMessage(<span class="string">"来到这里等待一下"</span>)</span><br><span class="line">                target.delay(<span class="number">0.5</span>);</span><br><span class="line">                counter++;  </span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                done = <span class="literal">true</span>;           </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        target.delay(<span class="number">0.5</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">mon = <span class="keyword">new</span> iOSMonkey2();</span><br><span class="line">UIATarget.localTarget().setTimeout(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i&lt; <span class="number">1000</span>; i++)&#123;</span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">    mon.operator();</span><br><span class="line">    &#125;<span class="keyword">catch</span>(err)&#123;</span><br><span class="line">        UIALogger.logMessage(<span class="string">"这里有一个异常"</span>);</span><br><span class="line">        UIALogger.logMessage(err.toString()+<span class="string">""</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    mon.screenShoot(<span class="string">"test"</span>);</span><br><span class="line">    mon.waitForLoad(<span class="number">1</span>);</span><br><span class="line">    <span class="comment">//UIATarget.localTarget().delay(2);</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>在 Instruments中直接运行，连接真机时，在 xcode=&gt;device中查看 crashlog。运行在模拟器时，在 控制台.app下查看 crashlogs.</p>
<p>另外，还需要考虑一些临界条件下的稳定性测试：<br>1.频繁收到内存警告时；<br>2.电池电量低；<br>3.3G网络不稳定时；</p>
]]></content>
    <summary type="html">
    <![CDATA[<h2 id="前言">前言</h2><p>稳定性测试一直是app测试的重点,保证app较低的crash率即能提高用户的使用体验,也是大部人kpi得一部分<br>下面的monkey测试脚本，转自之前的一个同事，也是我一直在用来跑monkey得<br>可以直接运行再instrument工具中，也可以使用命令instruments来启动<br>]]>
    
    </summary>
    
      <category term="ios" scheme="http://yoursite.com/tags/ios/"/>
    
      <category term="测试" scheme="http://yoursite.com/tags/%E6%B5%8B%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[PHP CURL单独获取http状态码]]></title>
    <link href="http://yoursite.com/2015/08/24/PHP-CURL%E5%8D%95%E7%8B%AC%E8%8E%B7%E5%8F%96http%E7%8A%B6%E6%80%81%E7%A0%81/"/>
    <id>http://yoursite.com/2015/08/24/PHP-CURL单独获取http状态码/</id>
    <published>2015-08-24T07:18:00.000Z</published>
    <updated>2015-08-28T03:25:50.000Z</updated>
    <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>PHP使用CURL能获取访问某URL返回的html的头信息，body信息等，下面讲述的是从返回的头信息单独获取状态码的方法</p>
<h2 id="实例">实例</h2><p>直接贴核心代码<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*模拟浏览器*/</span></span><br><span class="line"><span class="variable">$user_agent</span> = <span class="string">"Mozilla/5.0 (iPhone; CPU iPhone OS 8_0 like Mac OS X) AppleWebKit/600.1.3 (KHTML, like Gecko) Version/8.0 Mobile/12A4345d Safari/600.1.4"</span>;</span><br><span class="line"><span class="comment">//初始化</span></span><br><span class="line"><span class="variable">$ch</span> = curl_init();</span><br><span class="line">curl_setopt(<span class="variable">$ch</span>,CURLOPT_HEADER,<span class="number">1</span>);<span class="comment">//获取http头信息</span></span><br><span class="line">curl_setopt(<span class="variable">$ch</span>,CURLOPT_NOBODY,<span class="number">1</span>);<span class="comment">//不返回html的body信息</span></span><br><span class="line">curl_setopt(<span class="variable">$ch</span>,CURLOPT_TIMEOUT,<span class="number">30</span>); <span class="comment">//超时时长，单位秒</span></span><br><span class="line">curl_setopt (<span class="variable">$ch</span>, CURLOPT_USERAGENT, <span class="variable">$user_agent</span> ); <span class="comment">// 模拟用户使用的浏览器</span></span><br><span class="line">curl_setopt(<span class="variable">$ch</span>, CURLOPT_REFERER, <span class="string">"http://www.baidu.com/search/spider.html"</span>);<span class="comment">//模拟百度爬虫获取，防止被禁</span></span><br><span class="line">curl_setopt(<span class="variable">$ch</span>, CURLOPT_URL, <span class="variable">$url</span>);<span class="comment">//$url代表你要请求的链接</span></span><br><span class="line">curl_setopt(<span class="variable">$ch</span>, CURLOPT_RETURNTRANSFER, <span class="number">1</span>);<span class="comment">//返回值，而不是直接输出</span></span><br><span class="line">curl_setopt(<span class="variable">$ch</span>, CURLOPT_CUSTOMREQUEST, <span class="string">'GET'</span>);<span class="comment">//设置请求方式GET</span></span><br><span class="line"><span class="comment">//执行并获取HTML文档内容</span></span><br><span class="line">curl_exec(<span class="variable">$ch</span>);</span><br><span class="line"><span class="variable">$http_code</span> = strval(curl_getinfo(<span class="variable">$ch</span>,CURLINFO_HTTP_CODE));<span class="comment">//单独获取http状态码;</span></span><br><span class="line">var_dump(<span class="variable">$http_code</span>);<span class="comment">//输出http状态码</span></span><br><span class="line"><span class="comment">//释放curl句柄</span></span><br><span class="line">curl_close(<span class="variable">$ch</span>);</span><br></pre></td></tr></table></figure></p>
<h2 id="后记">后记</h2><p>PHP结合CURL还能做到很多事，待研究，在此记录</p>
]]></content>
    <summary type="html">
    <![CDATA[<h2 id="前言">前言</h2><p>PHP使用CURL能获取访问某URL返回的html的头信息，body信息等，下面讲述的是从返回的头信息单独获取状态码的方法</p>
<h2 id="实例">实例</h2><p>直接贴核心代码<br><figure class="high]]>
    </summary>
    
      <category term="CURL" scheme="http://yoursite.com/tags/CURL/"/>
    
      <category term="PHP" scheme="http://yoursite.com/tags/PHP/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[七夕节随笔]]></title>
    <link href="http://yoursite.com/2015/08/21/%E4%B8%83%E5%A4%95%E8%8A%82%E9%9A%8F%E7%AC%94/"/>
    <id>http://yoursite.com/2015/08/21/七夕节随笔/</id>
    <published>2015-08-20T16:23:17.000Z</published>
    <updated>2015-08-20T16:36:31.000Z</updated>
    <content type="html"><![CDATA[<p>哪里有人会喜欢寂寞，只不过是不想失望罢了<br>不知道自己一个人过了多少个光棍节，情人节，七夕。。。<br>自从毕业以来，好像就把自己的交友圈封闭了，除了职场圈和之前的朋友，就没有兴趣，也没有精力去发展新的朋友了<br>所以才会一直单身到现在吧（不过是自己给自己找个理由罢了）</p>
<p>也是，何必去羡慕他人晒出来的幸福，只要心里装着一个喜欢的人就够了<br>而刚好，我心里装着一个<br>好像喜欢很多年了，一直不敢表白，怕失去，怕被拒绝，什么都怕，胆小如鼠<br>是时候勇敢往前踏一步了，就算前方是悬崖又如何<br>加油！少年<br>晚安~</p>
]]></content>
    <summary type="html">
    <![CDATA[<p>哪里有人会喜欢寂寞，只不过是不想失望罢了<br>不知道自己一个人过了多少个光棍节，情人节，七夕。。。<br>自从毕业以来，好像就把自己的交友圈封闭了，除了职场圈和之前的朋友，就没有兴趣，也没有精力去发展新的朋友了<br>所以才会一直单身到现在吧（不过是自己给自己找个理由罢了]]>
    </summary>
    
      <category term="心情记录" scheme="http://yoursite.com/tags/%E5%BF%83%E6%83%85%E8%AE%B0%E5%BD%95/"/>
    
      <category term="随笔" scheme="http://yoursite.com/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Hello World]]></title>
    <link href="http://yoursite.com/2015/08/19/hello-world/"/>
    <id>http://yoursite.com/2015/08/19/hello-world/</id>
    <published>2015-08-19T02:09:06.000Z</published>
    <updated>2015-08-19T02:09:06.000Z</updated>
    <content type="html"><![CDATA[<p>Welcome to <a href="http://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="http://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="http://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick_Start">Quick Start</h2><h3 id="Create_a_new_post">Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run_server">Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate_static_files">Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy_to_remote_sites">Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>
]]></content>
    <summary type="html">
    <![CDATA[<p>Welcome to <a href="http://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="http://hexo.io]]>
    </summary>
    
  </entry>
  
</feed>
